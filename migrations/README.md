# Migrations Directory

This directory contains Alembic database migration files for the mexa-core project.

## Structure

```
migrations/
├── env.py                  # Alembic environment configuration
├── script.py.mako          # Template for new migration files
└── versions/               # All migration files
    ├── 001_create_initial_tables.py
    ├── 002_add_request_id_to_vales.py
    └── 003_add_indexes.py
```

## Files

- **env.py**: Configures Alembic to work with SQLAlchemy and the Flask application context
- **script.py.mako**: Template used when generating new migration files
- **versions/**: Contains all migration scripts in chronological order

## Migration Naming Convention

Migration files should follow this pattern:
- `XXX_descriptive_name.py` where XXX is a sequential number
- Use underscores to separate words
- Keep names concise but descriptive

Examples:
- `001_create_initial_tables.py`
- `002_add_request_id_to_vales.py`
- `003_add_indexes.py`

## Creating New Migrations

See [DEVELOPMENT.md](../DEVELOPMENT.md) and [MIGRATIONS.md](../MIGRATIONS.md) for detailed instructions.

Quick reference:
```bash
# Manual migration
alembic revision -m "description"

# Autogenerated migration
alembic revision --autogenerate -m "description"
```

## Do Not

- ❌ Edit already-applied migrations
- ❌ Delete migration files
- ❌ Change the migration order
- ❌ Skip migrations when deploying

## Do

- ✅ Test migrations locally before committing
- ✅ Include both upgrade() and downgrade() functions
- ✅ Add comments for complex operations
- ✅ Review autogenerated migrations
- ✅ Keep migrations focused and atomic
